# Мини-система сбора и анализа данных (Вариант: Интернет-магазин)

### Описание проекта
Данный проект представляет собой простую end-to-end систему для автоматической генерации, хранения и анализа данных. 
**Предметная область:** Интернет-магазин (поток заказов).

### Основные компоненты системы
1.  **Генератор данных (Python 3.13):** Имитирует поток заказов. Каждую секунду создает запись о продаже товара (категория, название, цена, количество, город) и записывает напрямую в БД.
2.  **База данных (PostgreSQL 18):** Хранит все сгенерированные события в таблице `orders`.
3.  **Redash (v25.8.0):** Платформа для визуализации данных. Позволяет создавать SQL-запросы и строить дашборды в реальном времени.
4.  **Jupyter Notebook:** Среда для глубокого анализа данных с использованием библиотек Pandas и Matplotlib.

---

### Технологический стек
*   **Docker Compose** — оркестрация всей системы одной командой.
*   **PostgreSQL 18-alpine** — основное хранилище.
*   **Redis 8.4-alpine** — брокер задач для Redash.
*   **Redash** (Server, Worker, Scheduler) — визуализация.
*   **Jupyter/scipy-notebook** — аналитика.

---

### Инструкция по запуску

1.  **Склонируйте репозиторий** и перейдите в папку проекта.
2.  **Запустите систему** (все зависимости и инициализация БД настроены автоматически):
    ```bash
    docker-compose up -d --build
    ```
3.  **Дождитесь инициализации.** Проверить статус создания системных таблиц Redash можно командой:
    ```bash
    docker ps -a --filter name=redash_install
    ```
    *(Контейнер должен иметь статус `Exited (0)`)*.

---

### Настройка инструментов

#### 1. Redash
*   **Адрес:** `http://localhost:5000`
*   **Первый вход:** Создайте учетную запись администратора.
*   **Подключение БД (Data Source):**
    *   Type: `PostgreSQL`
    *   Host: `db`
    *   User: `admin` | Password: `password`
    *   Database: `shop_db`
*   **Пример запроса для визуализации:**
    ```sql
    SELECT category, SUM(price * quantity) as revenue 
    FROM orders 
    GROUP BY category 
    ORDER BY revenue DESC
    ```

#### 2. Jupyter Notebook
*   **Адрес:** `http://localhost:8888`
*   **Токен для входа:** `easy_token`
*   **Анализ:** В папке `work` находится файл `analysis.ipynb` с примером подключения к БД и построения графиков через Pandas.

---

### Структура данных (Таблица `orders`)
*   `id` (SERIAL) — первичный ключ.
*   `created_at` (TIMESTAMP) — время совершения заказа.
*   `product` (TEXT) — название товара.
*   `category` (TEXT) — категория (Электроника, Дом, Спорт).
*   `price` (DECIMAL) — цена за единицу.
*   `quantity` (INT) — количество.
*   `city` (TEXT) — город доставки.

---
